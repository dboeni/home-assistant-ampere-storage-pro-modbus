DOMAIN = "ampere_modbus"
ATTR_MANUFACTURER = "Ampere"

CONF_UNIT = "unit"

DEFAULT_NAME = "Ampere.StoragePro"
DEFAULT_SCAN_INTERVAL = 15
DEFAULT_PORT = 502
DEFAULT_UNIT = 2

DEVICE_STATUSSES = {
    0: "Initialization",
    1: "Waiting",
    2: "Running",
    3: "Offnet mode, used for energy storage",
    4: "Grid on-load mode, used for energy storage",
    5: "Fault",
    6: "Update",
    7: "Test",
    8: "Self-checking",
    9: "Reset",
}

PV_DIRECTION = {
    0: "No output",
    1: "Output",
}

BATTERY_DIRECTION = {
    1: "Battery discharge",
    0: "No battery flow",
    -1: "Battery charge",
}

GRID_DIRECTION = {
    1: "Grid output",
    0: "No grid flow",
    -1: "Grid input",
}

FAULT_MESSAGES = {
    0: {
        0x00000001: "Lost Com. H â†” M Err",
        0x00000002: "Meter lost Meter",
        0x00000004: "HIMI Eeprom error",
        0x00000008: "HMI RTC Err",
        0x00000010: "BMS Device Error",
        0x00000020: "BMS lost communication warning",
        0x00000040: "Reserved (bit 71)",
        0x00000080: "Reserved (bit 72)",
        0x00000100: "Reserved (bit 73)",
        0x00000200: "Reserved (bit 74)",
        0x00000400: "Reserved (bit 75)",
        0x00000800: "R Phase voltage high fault",
        0x00001000: "R Phase voltage low fault",
        0x00002000: "S Phase voltage high fault",
        0x00004000: "S Phase voltage low fault",
        0x00008000: "T Phase voltage high fault",
        0x00010000: "T Phase voltage low fault",
        0x00020000: "Frequency High Fault",
        0x00040000: "Frequency Low Fault ",
        0x00080000: "Reserved (bit 84)",
        0x00100000: "Reserved (bit 85)",
        0x00200000: "Reserved (bit 86)",
        0x00400000: "Reserved (bit 87)",
        0x00800000: "No Grid Fault",
        0x01000000: "PV Input Mode Fault",
        0x02000000: "Hardware HW PV Curr High Fault",
        0x04000000: "PV Voltage",
        0x08000000: "Hardware HW Bus Volt High Fault",
        0x10000000: "Reserved (bit 93)",
        0x20000000: "Reserved (bit 94)",
        0x40000000: "Reserved (bit 95)",
        0x80000000: "Reserved (bit 96)",
    },
    1: {
        0x00000001: "Master Bus Voltage High",
        0x00000002: "Master Bus Voltage Low",
        0x00000004: "Master Grid Phase Error",
        0x00000008: "Master PV Voltage High Error",
        0x00000010: "Master Islanding Error",
        0x00000020: "Reserved (bit 6)",
        0x00000040: "Master PV Input Error",
        0x00000080: "Communication between DSP and PC lost",
        0x00000100: "Master HW Bus Voltage High",
        0x00000200: "Master HW PV Current High",
        0x00000400: "Reserved (bit 11)",
        0x00000800: "Master HW Inv Current High",
        0x00001000: "Reserved (bit 13)",
        0x00002000: "Reserved (bit 14)",
        0x00004000: "Master Grid NE Voltage Error",
        0x00008000: "Master DRM0 Error",
        0x00010000: "Master Fan 1 Error",
        0x00020000: "Master Fan 2 Error",
        0x00040000: "Master Fan 3 Error",
        0x00080000: "Master Fan 4 Error",
        0x00100000: "Master Arc Error",
        0x00200000: "Master SW PV Current High",
        0x00400000: "Master Battery Voltage High",
        0x00800000: "Master Battery Current High",
        0x01000000: "Master Battery Charge Voltage High",
        0x02000000: "Master Battery Overload",
        0x04000000: "Master Battery Soft Connect Timeout",
        0x08000000: "Master Output Overload",
        0x10000000: "Master Battery Open Circuit Error",
        0x20000000: "Master Battery Discharge Voltage Low",
        0x40000000: "Authority expires",
        0x80000000: "Lost Communication D <-> C",
    },
    2: {
        0x80000000: "Bus Voltage Balance Error",
        0x40000000: "ISO Error",
        0x20000000: "Phase 3 DCI Error",
        0x10000000: "Phase 2 DCI Error",
        0x08000000: "Phase 1 DCI Error",
        0x04000000: "GFCI Error",
        0x02000000: "Reserved (bit 58)",
        0x01000000: "Reserved (bit 57)",
        0x00800000: "No Grid Error",
        0x00400000: "Phase 3 DCV Current Error",
        0x00200000: "Phase 2 DCV Current Error",
        0x00100000: "Phase 1 DCV Current Error",
        0x00080000: "Reserved (bit 52)",
        0x00040000: "Grid Frequency Low",
        0x00020000: "Grid Frequency High",
        0x00010000: "Reserved (bit 49)",
        0x00008000: "OffGrid Voltage Low",
        0x00004000: "Voltage of Master host power network is 10 Min High under voltage",
        0x00002000: "Phase 3 Voltage Low",
        0x00001000: "Phase 3 Voltage High",
        0x00000800: "Phase 2 Voltage Low",
        0x00000400: "Phase 2 Voltage High",
        0x00000200: "Phase 1 Voltage Low",
        0x00000100: "Phase 1 Voltage High",
        0x00000080: "Current Sensor Error",
        0x00000040: "DCI Device Error",
        0x00000020: "GFCI Device Error",
        0x00000010: "Communication Error M <-> S",
        0x00000008: "Temperature Low Error",
        0x00000004: "Temperature High Error",
        0x00000002: "EEPROM Error",
        0x00000001: "Relay Error",
    },
}
